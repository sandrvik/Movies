(()=>{var e={171:()=>{const e={"#/":"Films","#/search":"Films","#/favourites":"Favourites"};function t(){const t=document.getElementsByClassName("menu__item"),n=location.hash;for(let o of t)o.innerText!==e[n]?o.classList.remove("menu__item--active"):o.classList.add("menu__item--active")}window.addEventListener("hashchange",t),window.addEventListener("load",t)}},t={};function n(o){var a=t[o];if(void 0!==a)return a.exports;var s=t[o]={exports:{}};return e[o](s,s.exports,n),s.exports}(()=>{"use strict";const e=document.getElementById("popup"),t=document.getElementById("popup__image"),o=document.getElementById("popup__title"),a=document.getElementById("popup__lang"),s=document.getElementById("popup__year"),i=document.getElementById("popup__description"),l=document.getElementById("popup__genres"),c=document.getElementById("overlay");function d(){e.classList.toggle("active"),c.classList.toggle("active"),document.body.classList.toggle("lock")}function r(e){!function(e){const n=e.parentNode;t.innerHTML=`<img src=${n.info.image?.medium||n.info.image?.original||"./assets/images/noImageAvailable.jpg"}>`,o.innerText=n.info.name,a.innerText=n.info.language,s.innerText=n.info.premiered?.slice(0,4)||"Sometime",i.innerHTML=n.info.summary||"No description available.",l.innerHTML="",n.info.genres.forEach((e=>{const t=document.createElement("li");t.innerText=e,l.append(t)}))}(e.target),d()}e.addEventListener("click",(function(e){e.target.closest(".popup__container")&&!e.target.classList.contains("popup__close")||d()}));const m=document.getElementById("movies");function u(e){if(movies.innerHTML="",0===e.length||0===e.size){const e=document.createElement("h2");e.innerText="Films not found",movies.append(e)}else e.forEach((e=>function(e){const t=document.createElement("li");t.setAttribute("class","card"),t.setAttribute("data-id",e.id),t.info=e;const n=document.createElement("img");n.setAttribute("class","card__img"),n.style.width="200px",n.style.height="280px",n.src=e.image?.medium||"./assets/images/noImageAvailable.jpg",n.addEventListener("click",r);const o=document.createElement("img");o.setAttribute("class","card__heart"),v.has(`${e.id}`)?o.src="./assets/icomoon/SVG/heart.svg":o.src="./assets/icomoon/SVG/heart-outlined.svg",t.append(n),t.append(o),m.appendChild(t)}(e)))}const g=document.getElementById("header"),p=document.getElementById("main"),y=document.getElementById("pagination"),E=document.getElementById("search"),f=document.getElementById("favouritesHeader");let v;function h(){g.style.display="block",p.style.display="block",y.style.display="none",E.style.display="none",f.style.display="block";const e=document.getElementsByClassName("filters__select");for(let t of e)t.disabled=!0;u(v)}v=localStorage.getItem("favs")?new Map(JSON.parse(localStorage.getItem("favs"))):new Map;const B=function(e,t,n){return function(e){if(e.target.classList.contains("card__heart")){const o=e.target.parentNode.dataset.id,a=e.target.parentNode.info;t.has(o)?(t.delete(o),I(t,n),e.target.src="./assets/icomoon/SVG/heart-outlined.svg"):(t.set(o,a),e.target.src="./assets/icomoon/SVG/heart.svg",I(t,n))}}}(0,v,"favs");function I(e,t){localStorage.setItem(t,JSON.stringify([...e]))}document.addEventListener("click",B);const _="https://api.tvmaze.com/";async function L(e,t){try{const n=await fetch(e);return((e,t)=>e.map((e=>((e,...t)=>{const n=t.filter((t=>t in e)).map((t=>[t,e[t]]));return Object.fromEntries(n)})(e.show||e._embedded?.show||e,...t))))((await n.json()).slice(0,t),["language","genres","name","image","summary","premiered","id"])}catch(e){console.log("Error:",e)}}const x=document.getElementById("lang"),b=document.getElementById("genre");function k(e){const t={language:x.value,genres:b.value},n=Object.keys(t);return e.filter((e=>n.every((n=>!t[n]||t[n]===e[n]||e[n].includes(t[n])))))}const w=document.getElementById("currentPage"),T=document.getElementById("lastPage"),N=document.getElementById("prev"),S=document.getElementById("next"),$=document.getElementById("paginationDropDown"),F=document.getElementById("expandDropDown");let H=1;document.body.addEventListener("click",(()=>{$.classList.contains("pagination__full--hidden")||$.classList.toggle("pagination__full--hidden")})),w.innerText=H,T.innerText=10,T.addEventListener("click",(()=>{H=10,w.innerText=H,z()})),N.addEventListener("click",(()=>{1!==H&&(H-=1,w.innerText=H,z())})),S.addEventListener("click",(()=>{10!==H&&(H+=1,w.innerText=H,z())})),function(e){for(let e=1;e<=10;e++){const t=document.createElement("li");t.classList.add("pagination__page"),t.innerText=e,t.addEventListener("click",(e=>{H=+e.target.innerText,w.innerText=H,z(),$.classList.toggle("pagination__full--hidden")})),$.append(t)}F.addEventListener("click",(e=>{e.stopPropagation(),$.classList.toggle("pagination__full--hidden")}))}();const j=document.getElementById("header"),A=document.getElementById("main"),C=document.getElementById("pagination"),D=document.getElementById("loginForm"),M=document.getElementById("perPage"),O=document.getElementById("search"),P=document.getElementById("favouritesHeader");let G,V;async function z(){location.hash="#/",j.style.display="block",A.style.display="block",D.style.display="none",G=await L(`${_}shows?page=${H-1}`,50),V=k(G),u(V.slice(0,M.value)),C.style.display="block",M.style.display="inline",O.style.display="flex",P.style.display="none";const e=document.getElementsByClassName("filters__select");for(let t of e)t.disabled=!1;x.addEventListener("change",(()=>{V=k(G),u(V.slice(0,M.value))})),b.addEventListener("change",(()=>{V=k(G),u(V.slice(0,M.value))}))}M.addEventListener("change",(()=>{u(V.slice(0,M.value))}));const J=document.getElementById("loginForm"),q=document.getElementById("name"),R=document.getElementById("pass"),K=document.getElementById("loginBtn"),Q=document.getElementById("logoutBtn"),U=document.getElementById("main"),W=document.getElementById("header"),X={admin:"123456",test:"test1234"};function Y(e){const t=document.createElement("div");return t.classList.add("form__error"),t.innerText=`This field must contain over ${e-1} symbols`,function(n){n.target.value.length<e?n.target.after(t):t.remove()}}function Z(e,t,n,o){return function(a){a.target.value.length>=e?t[o]=!0:t[o]=!1,Object.values(t).every((e=>e))?n.disabled=!1:n.disabled=!0}}Q.addEventListener("click",(function(e){e.preventDefault(),document.cookie="login=true;max-age=0",U.innerText="",location.hash="#/",location.reload()})),K.addEventListener("click",(function(e){e.preventDefault(),X[q.value]&&R.value===X[q.value]?(document.cookie="login=true;max-age=3600",J.style.display="none",pe()):console.log("Invalid credentials")})),function(e,t){t.disabled=!0;const n={};for(let o in e){n[o]=!1;const a=Y(e[o]),s=Z(e[o],n,t,o);document.getElementById(o).addEventListener("keyup",(e=>{a(e),s(e)}))}}({name:4,pass:6},K);const ee=document.getElementById("search"),te=document.getElementById("perPage"),ne=document.getElementById("pagination"),oe=document.getElementById("searchField"),ae=document.getElementById("searchButton"),se=document.getElementById("favouritesHeader");let ie,le;async function ce(){if(oe.value){ie=await L(`${_}search/shows?q=${oe.value}`,50),le=k(ie),u(le),ne.style.display="none",te.style.display="none",ee.style.display="flex",se.style.display="none";const e=document.getElementsByClassName("filters__select");for(let t of e)t.disabled=!1;x.addEventListener("change",(()=>{le=k(ie),u(le)})),b.addEventListener("change",(()=>{le=k(ie),u(le)}))}else z()}let de=(re="#/search",me=ce,function(){location.hash===re?me():location.hash=re});var re,me;function ue(e){document.cookie.includes("login=true")?e():(J.style.display="block",W.style.display="none",U.style.display="none")}ae.addEventListener("click",de),oe.addEventListener("keydown",(e=>{"Enter"===e.key&&de()}));const ge=[{path:"/",component:{render:()=>ue(z)}},{path:"/favourites",component:{render:()=>ue(h)}},{path:"/search",component:{render:()=>ue(ce)}}],pe=()=>{const e=location.hash.slice(1).toLowerCase()||"/",{component:t}=((e,t)=>t.find((t=>t.path.match(new RegExp(`^\\${e}$`,"gm"))))||void 0)(e,ge)||{};t.render()};window.addEventListener("hashchange",pe),window.addEventListener("load",pe),n(171)})()})();