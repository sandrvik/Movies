(()=>{var e={550:()=>{const e={"#/":"Films","#/search":"Films","#/favourites":"Favourites"};function t(){const t=document.getElementsByClassName("menu__item"),n=location.hash;for(let a of t)a.innerText!==e[n]?a.classList.remove("menu__item--active"):a.classList.add("menu__item--active")}window.addEventListener("hashchange",t),window.addEventListener("load",t)}},t={};function n(a){var o=t[a];if(void 0!==o)return o.exports;var s=t[a]={exports:{}};return e[a](s,s.exports,n),s.exports}(()=>{"use strict";const e=document.getElementById("popup"),t=document.getElementById("popup__image"),a=document.getElementById("popup__title"),o=document.getElementById("popup__lang"),s=document.getElementById("popup__year"),i=document.getElementById("popup__description"),l=document.getElementById("popup__genres"),d=document.getElementById("overlay");function c(){e.classList.toggle("active"),d.classList.toggle("active"),document.body.classList.toggle("lock")}function r(e){!function(e){const n=e.parentNode;t.innerHTML=`<img src=${n.info.image?.medium||n.info.image?.original||"./assets/images/noImageAvailable.jpg"}>`,a.innerText=n.info.name,o.innerText=n.info.language,s.innerText=n.info.premiered?.slice(0,4)||"Sometime",i.innerHTML=n.info.summary||"No description available.",l.innerHTML="",n.info.genres.forEach((e=>{const t=document.createElement("li");t.innerText=e,l.append(t)}))}(e.target),c()}e.addEventListener("click",(function(e){e.target.closest(".popup__container")&&!e.target.classList.contains("popup__close")||c()}));const m=document.getElementById("lang"),u=document.getElementById("genre"),g=document.getElementById("movies");function p(e,t,n=!0){const a=n?function(e){const t={language:m.value,genres:u.value},n=Object.keys(t);return e.filter((e=>n.every((n=>!t[n]||t[n]===e[n]||e[n].includes(t[n])))))}(e):e;if(g.innerHTML="",0===a.length){const e=document.createElement("h2");e.innerText="Films not found",g.append(e)}else a.slice(0,t).forEach((e=>function(e){const t=document.createElement("li");t.setAttribute("class","card"),t.setAttribute("data-id",e.id),t.info=e;const n=document.createElement("img");n.setAttribute("class","card__img"),n.style.width="200px",n.style.height="280px",n.src=e.image?.medium||"./assets/images/noImageAvailable.jpg",n.addEventListener("click",r);const a=document.createElement("img");a.setAttribute("class","card__heart"),B.has(`${e.id}`)?a.src="./assets/icomoon/SVG/heart.svg":a.src="./assets/icomoon/SVG/heart-outlined.svg",t.append(n),t.append(a),g.appendChild(t)}(e)))}const y=document.getElementById("header"),E=document.getElementById("main"),f=document.getElementById("pagination"),v=document.getElementById("search"),h=document.getElementById("favouritesHeader");let B;function I(){y.style.display="block",E.style.display="block",f.style.display="none",v.style.display="none",h.style.display="block";const e=document.getElementsByClassName("filters__select");for(let t of e)t.disabled=!0;p(Array.from(B.values()),1/0,!1)}function _(e,t){localStorage.setItem(t,JSON.stringify([...e]))}B=localStorage.getItem("favs")?new Map(JSON.parse(localStorage.getItem("favs"))):new Map;const L=function(e,t,n){return function(e){if(e.target.classList.contains("card__heart")){const a=e.target.parentNode.dataset.id,o=e.target.parentNode.info;t.has(a)?(t.delete(a),_(t,n),e.target.src="./assets/icomoon/SVG/heart-outlined.svg"):(t.set(a,o),e.target.src="./assets/icomoon/SVG/heart.svg",_(t,n))}}}(0,B,"favs");document.addEventListener("click",L);const x="https://api.tvmaze.com/";async function b(e,t){try{const n=await fetch(e);return((e,t)=>e.map((e=>((e,...t)=>{const n=t.filter((t=>t in e)).map((t=>[t,e[t]]));return Object.fromEntries(n)})(e.show||e._embedded?.show||e,...t))))((await n.json()).slice(0,t),["language","genres","name","image","summary","premiered","id"])}catch(e){console.log("Error:",e)}}const k=document.getElementById("currentPage"),w=document.getElementById("lastPage"),T=document.getElementById("prev"),N=document.getElementById("next"),S=document.getElementById("paginationDropDown"),$=document.getElementById("expandDropDown");let A=1;document.body.addEventListener("click",(()=>{S.classList.contains("pagination__full--hidden")||S.classList.toggle("pagination__full--hidden")})),k.innerText=A,w.innerText=10,w.addEventListener("click",(()=>{A=10,k.innerText=A,G()})),T.addEventListener("click",(()=>{1!==A&&(A-=1,k.innerText=A,G())})),N.addEventListener("click",(()=>{10!==A&&(A+=1,k.innerText=A,G())})),function(e){for(let e=1;e<=10;e++){const t=document.createElement("li");t.classList.add("pagination__page"),t.innerText=e,t.addEventListener("click",(e=>{A=+e.target.innerText,k.innerText=A,G(),S.classList.toggle("pagination__full--hidden")})),S.append(t)}$.addEventListener("click",(e=>{e.stopPropagation(),S.classList.toggle("pagination__full--hidden")}))}();const F=document.getElementById("header"),H=document.getElementById("main"),j=document.getElementById("pagination"),C=document.getElementById("loginForm"),D=document.getElementById("perPage"),M=document.getElementById("search"),O=document.getElementById("favouritesHeader");let P;async function G(){location.hash="#/",F.style.display="block",H.style.display="block",C.style.display="none",P=await b(`${x}shows?page=${A-1}`,50),p(P,D.value),j.style.display="block",D.style.display="inline",M.style.display="flex",O.style.display="none";const e=document.getElementsByClassName("filters__select");for(let t of e)t.disabled=!1;m.addEventListener("change",(()=>p(P,D.value))),u.addEventListener("change",(()=>p(P,D.value))),D.addEventListener("change",(()=>p(P,D.value)))}const V=document.getElementById("loginForm"),J=document.getElementById("name"),q=document.getElementById("pass"),z=document.getElementById("loginBtn"),R=document.getElementById("logoutBtn"),K=document.getElementById("main"),Q=document.getElementById("header"),U={admin:"123456",test:"test1234"};function W(e){const t=document.createElement("div");return t.classList.add("form__error"),t.innerText=`This field must contain over ${e-1} symbols`,function(n){n.target.value.length<e?n.target.after(t):t.remove()}}function X(e,t,n,a){return function(o){o.target.value.length>=e?t[a]=!0:t[a]=!1,Object.values(t).every((e=>e))?n.disabled=!1:n.disabled=!0}}R.addEventListener("click",(function(e){e.preventDefault(),document.cookie="login=true;max-age=0",K.innerText="",location.hash="#/",location.reload()})),z.addEventListener("click",(function(e){e.preventDefault(),U[J.value]&&q.value===U[J.value]?(document.cookie="login=true;max-age=3600",V.style.display="none",me()):console.log("Invalid credentials")})),function(e,t){t.disabled=!0;const n={};for(let a in e){n[a]=!1;const o=W(e[a]),s=X(e[a],n,t,a);document.getElementById(a).addEventListener("keyup",(e=>{o(e),s(e)}))}}({name:4,pass:6},z);const Y=document.getElementById("search"),Z=document.getElementById("perPage"),ee=document.getElementById("pagination"),te=document.getElementById("searchField"),ne=document.getElementById("searchButton"),ae=document.getElementById("favouritesHeader");let oe;async function se(){if(te.value){oe=await b(`${x}search/shows?q=${te.value}`,50),p(oe,10),ee.style.display="none",Z.style.display="none",Y.style.display="flex",ae.style.display="none";const e=document.getElementsByClassName("filters__select");for(let t of e)t.disabled=!1;m.addEventListener("change",(()=>p(oe,1/0))),u.addEventListener("change",(()=>p(oe,1/0)))}else G()}const ie=(le="#/search",de=se,function(){location.hash===le?de():location.hash=le});var le,de;function ce(e){document.cookie.includes("login=true")?e():(V.style.display="block",Q.style.display="none",K.style.display="none")}ne.addEventListener("click",ie),te.addEventListener("keydown",(e=>{"Enter"===e.key&&ie()}));const re=[{path:"/",component:{render:()=>ce(G)}},{path:"/favourites",component:{render:()=>ce(I)}},{path:"/search",component:{render:()=>ce(se)}}],me=()=>{const e=location.hash.slice(1).toLowerCase()||"/",{component:t}=((e,t)=>t.find((t=>t.path.match(new RegExp(`^\\${e}$`,"gm"))))||void 0)(e,re)||{};t.render()};window.addEventListener("hashchange",me),window.addEventListener("load",me),n(550)})()})();